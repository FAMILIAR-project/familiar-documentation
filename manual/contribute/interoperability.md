# Contribute: Add interoperability to your own formalism

* Loading
  * You can implement a bridge between your formalism and one of the formalism supported by FAMILIAR 
   * Hint: it can be a model-to-text transformation or a model-to-model transformation (using the Ecore metamodel generated by Xtext)
  * Note that FAMILIAR can load a feature model serialized in an XMI file conforms to the Ecore metamodel generated by Xtext. 
  * You can use the class `FMLFeatureModelReader.java`


```java
FeatureModel fm = new FMLFeatureModelReader().parseString("FM (A: B C [D];) ");
FeatureModel fm2 = new FMLFeatureModelReader().parseFile(new File("examples/testing/FMs/fm2.fml"));
XMIResource xmi = new FMLFeatureModelWriter(fm2).toXMI("examples/testing/FMs/fm2ecore");
FeatureModel fm3 = new FMLFeatureModelReader().parseXMIFile(xmi);
```

 
 * Serializing 
  * Once a feature model is serialized in an XMI file conforms to the Ecore metamodel generated by Xtext, you can use state-of-the-art modeling tools to visit the model. 
  * Or simply using the class `FMLFeatureModelWriter.java`

```java
// serializing fm2 to XMI
XMIResource xmi = new FMLFeatureModelWriter(fm2).toXMI("examples/testing/FMs/fm2ecore");
// or to text (String representation)
new FMLFeatureModelWriter(fm2).toString() ; 
```

  * Or extending the abstract class `FeatureModelVisitor.java`

```java
public abstract class FeatureModelVisitor {
	
	/*
	 *  the feature model to visit
	 */
	
	protected FeatureModel fm ;
	
	public FeatureModelVisitor(FeatureModel fm) {
		this.fm = fm ;
	}
	
	/*
	 * Entry point
	 */
	
	public abstract String treatFeatureModel(FeatureModel fm) ; 
	
	/*
	 * Treat a production (like a grammar production in GUIDSL)
	 */
	
	public abstract String treatProd(Production prod) ;

	/*
	 * Treat a child feature (Xor, Or, And)
	 */
	
	public abstract String treatChild(Child c) ;

	/*
	 * Treat a constraint (e.g., A implies B)
	 * 
	 */
	
	public abstract String treatConstraint(CNF constraint) ;
	
}
```